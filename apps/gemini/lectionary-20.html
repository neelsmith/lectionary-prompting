
                        <!DOCTYPE html>
                        <html lang="en">
                        <head>
                            <meta charset="UTF-8">
                            <meta name="viewport" content="width=device-width, initial-scale=1.0">
							<style>
								body {
									background-color: white; /* Ensure the iframe has a white background */
								}

								
        /* Basic CSS for styling the page */
        :root {
            --primary-bg: #f8f9fa;
            --primary-text: #212529;
            --accent-color: #005a9c;
            --accent-color-light: #e7f1fa;
            --purple-season-border: #a98fc1; /* Advent & Lent */
            --purple-season-text: #8e44ad;
            --green-season-border: #52a56f;  /* Epiphany & Pentecost-tide */
            --green-season-text: #27ae60;
            --ash-wed-color-border: #34495e;
            --red-day-border: #c0392b; /* Palm Sunday, Pentecost */
            --card-bg: #ffffff;
            --card-shadow: 0 4px 8px rgba(0,0,0,0.1);
            --border-color: #ced4da;
            --light-gray: #6c757d;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--primary-bg);
            color: var(--primary-text);
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
        }

        .container {
            background-color: var(--card-bg);
            padding: 40px;
            border-radius: 12px;
            box-shadow: var(--card-shadow);
            text-align: center;
            max-width: 600px;
            width: 100%;
        }

        h1 {
            color: var(--accent-color);
            margin-top: 0;
            margin-bottom: 24px;
            font-size: 2em;
        }

        hr {
            border: none;
            border-top: 1px solid #e9ecef;
            margin: 24px 0;
        }

        .date-display {
            font-size: 1.5em;
            margin-bottom: 16px;
            color: #495057;
        }

        .cycle-display {
            font-size: 1.2em;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            gap: 8px 12px;
            margin-bottom: 24px;
        }

        .cycle-label {
            font-size: 3em;
            font-weight: bold;
            color: var(--accent-color);
            line-height: 1;
        }
        
        .cycle-dates {
            font-size: 0.9em;
            color: var(--light-gray);
        }
        
        /* Calendar Styles */
        .calendar-container {
            margin-top: 24px;
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        #monthYearDisplay { font-size: 1.2em; font-weight: 600; }

        .nav-btn {
            background: none; border: 1px solid var(--border-color); border-radius: 50%;
            width: 32px; height: 32px; font-size: 1.2em; cursor: pointer; transition: background-color 0.2s;
        }
        .nav-btn:hover { background-color: #e9ecef; }

        .calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 5px; }
        .calendar-weekdays { font-weight: 600; color: var(--light-gray); padding-bottom: 10px; }
        .calendar-weekdays > div { text-align: center; font-size: 0.9em; }

        .calendar-day {
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            height: 42px; border-radius: 8px; position: relative; line-height: 1.2; font-size: 0.9em;
        }
        .calendar-day.current-month { cursor: pointer; transition: background-color 0.2s; }
        .calendar-day.current-month:hover { background-color: var(--accent-color-light); }

        .calendar-day.today { box-shadow: inset 0 0 0 2px var(--light-gray); }
        .calendar-day.purple-season { box-shadow: inset 0 0 0 2px var(--purple-season-border); }
        .calendar-day.green-season { box-shadow: inset 0 0 0 2px var(--green-season-border); }
        .calendar-day.ash-wednesday { box-shadow: inset 0 0 0 2px var(--ash-wed-color-border); }
        .calendar-day.red-day { box-shadow: inset 0 0 0 2px var(--red-day-border); }

        .calendar-day.selected-day {
            background-color: var(--accent-color); color: white; font-weight: bold; box-shadow: none;
        }

        .holiday-label {
            font-size: 9px; margin-top: 1px; color: var(--accent-color);
            font-weight: 600; text-transform: uppercase;
        }
        .purple-season .holiday-label { color: var(--purple-season-text); }
        .green-season .holiday-label { color: var(--green-season-text); }
        .calendar-day.selected-day .holiday-label { color: var(--accent-color-light); }

        /* Readings Display Styles */
        #readingsContainer {
            margin-top: 30px;
            padding: 20px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            text-align: left;
            background-color: var(--primary-bg);
        }
        #readingsContainer h3 {
            margin-top: 0;
            color: var(--accent-color);
        }
        .reading-item {
            margin-bottom: 12px;
        }
        .reading-item strong {
            display: block;
            color: var(--primary-text);
            font-weight: 600;
        }
        .reading-item span {
            color: var(--light-gray);
        }

        footer { margin-top: 30px; font-size: 0.8em; color: var(--light-gray); }
    

							</style>
                        </head>
                        <body>
                            <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RCL Lectionary Cycle Finder</title>
    <style>
        /* Basic CSS for styling the page */
        :root {
            --primary-bg: #f8f9fa;
            --primary-text: #212529;
            --accent-color: #005a9c;
            --accent-color-light: #e7f1fa;
            --purple-season-border: #a98fc1; /* Advent & Lent */
            --purple-season-text: #8e44ad;
            --green-season-border: #52a56f;  /* Epiphany & Pentecost-tide */
            --green-season-text: #27ae60;
            --ash-wed-color-border: #34495e;
            --red-day-border: #c0392b; /* Palm Sunday, Pentecost */
            --card-bg: #ffffff;
            --card-shadow: 0 4px 8px rgba(0,0,0,0.1);
            --border-color: #ced4da;
            --light-gray: #6c757d;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--primary-bg);
            color: var(--primary-text);
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
        }

        .container {
            background-color: var(--card-bg);
            padding: 40px;
            border-radius: 12px;
            box-shadow: var(--card-shadow);
            text-align: center;
            max-width: 600px;
            width: 100%;
        }

        h1 {
            color: var(--accent-color);
            margin-top: 0;
            margin-bottom: 24px;
            font-size: 2em;
        }

        hr {
            border: none;
            border-top: 1px solid #e9ecef;
            margin: 24px 0;
        }

        .date-display {
            font-size: 1.5em;
            margin-bottom: 16px;
            color: #495057;
        }

        .cycle-display {
            font-size: 1.2em;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            gap: 8px 12px;
            margin-bottom: 24px;
        }

        .cycle-label {
            font-size: 3em;
            font-weight: bold;
            color: var(--accent-color);
            line-height: 1;
        }
        
        .cycle-dates {
            font-size: 0.9em;
            color: var(--light-gray);
        }
        
        /* Calendar Styles */
        .calendar-container {
            margin-top: 24px;
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        #monthYearDisplay { font-size: 1.2em; font-weight: 600; }

        .nav-btn {
            background: none; border: 1px solid var(--border-color); border-radius: 50%;
            width: 32px; height: 32px; font-size: 1.2em; cursor: pointer; transition: background-color 0.2s;
        }
        .nav-btn:hover { background-color: #e9ecef; }

        .calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 5px; }
        .calendar-weekdays { font-weight: 600; color: var(--light-gray); padding-bottom: 10px; }
        .calendar-weekdays > div { text-align: center; font-size: 0.9em; }

        .calendar-day {
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            height: 42px; border-radius: 8px; position: relative; line-height: 1.2; font-size: 0.9em;
        }
        .calendar-day.current-month { cursor: pointer; transition: background-color 0.2s; }
        .calendar-day.current-month:hover { background-color: var(--accent-color-light); }

        .calendar-day.today { box-shadow: inset 0 0 0 2px var(--light-gray); }
        .calendar-day.purple-season { box-shadow: inset 0 0 0 2px var(--purple-season-border); }
        .calendar-day.green-season { box-shadow: inset 0 0 0 2px var(--green-season-border); }
        .calendar-day.ash-wednesday { box-shadow: inset 0 0 0 2px var(--ash-wed-color-border); }
        .calendar-day.red-day { box-shadow: inset 0 0 0 2px var(--red-day-border); }

        .calendar-day.selected-day {
            background-color: var(--accent-color); color: white; font-weight: bold; box-shadow: none;
        }

        .holiday-label {
            font-size: 9px; margin-top: 1px; color: var(--accent-color);
            font-weight: 600; text-transform: uppercase;
        }
        .purple-season .holiday-label { color: var(--purple-season-text); }
        .green-season .holiday-label { color: var(--green-season-text); }
        .calendar-day.selected-day .holiday-label { color: var(--accent-color-light); }

        /* Readings Display Styles */
        #readingsContainer {
            margin-top: 30px;
            padding: 20px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            text-align: left;
            background-color: var(--primary-bg);
        }
        #readingsContainer h3 {
            margin-top: 0;
            color: var(--accent-color);
        }
        .reading-item {
            margin-bottom: 12px;
        }
        .reading-item strong {
            display: block;
            color: var(--primary-text);
            font-weight: 600;
        }
        .reading-item span {
            color: var(--light-gray);
        }

        footer { margin-top: 30px; font-size: 0.8em; color: var(--light-gray); }
    </style>
</head>
<body>

    <div class="container">
        <h1>Revised Common Lectionary</h1>
        
        <div id="loading">Calculating...</div>

        <div id="results" style="display: none;">
            <p class="date-display" id="sundayDate"></p>
            <div class="cycle-display">
                Lectionary Cycle: 
                <span class="cycle-label" id="lectionaryCycle"></span>
                <span class="cycle-dates" id="cycleDateRange"></span>
            </div>

            <hr>

            <div class="calendar-container">
                <div class="calendar-header">
                    <button id="prevMonthBtn" class="nav-btn" aria-label="Previous month">&lt;</button>
                    <h3 id="monthYearDisplay"></h3>
                    <button id="nextMonthBtn" class="nav-btn" aria-label="Next month">&gt;</button>
                </div>
                <div class="calendar-grid calendar-weekdays">
                    <div>Su</div><div>Mo</div><div>Tu</div><div>We</div><div>Th</div><div>Fr</div><div>Sa</div>
                </div>
                <div id="calendarDays" class="calendar-grid"></div>
            </div>

            <div id="readingsContainer" style="display: none;">
                <h3 id="readings-title">Lectionary Readings</h3>
                <div class="reading-item"><strong>Psalms:</strong> <span id="reading-psalms"></span></div>
                <div class="reading-item"><strong>Old Testament:</strong> <span id="reading-ot"></span></div>
                <div class="reading-item"><strong>New Testament:</strong> <span id="reading-nt"></span></div>
                <div class="reading-item"><strong>Gospel:</strong> <span id="reading-gospel"></span></div>
            </div>
        </div>

        <footer>
            The lectionary cycle begins on the First Sunday of Advent.
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // --- Lectionary Data ---
            const LECTIONARY_A_RAW_DATA = `label|psalms|ot|nt|gospel
Advent 1|122|Isaiah 2:1-5|Romans 13:11-14|Matthew 24:36-44
Advent 2|72:1-7, 18-19|Isaiah 11:1-10|Romans 15:4-13|Matthew 3:1-12
Advent 3|146:5-10|Isaiah 35:1-10|James 5:7-10|Matthew 11:2-11
Advent 4|80:1-7, 17-19|Isaiah 7:10-16|Romans 1:1-7|Matthew 1:18-25
Christmas|98|Isaiah 52:7-10|Hebrews 1:1-4,(5-12)|John 1:1-14
Christmastide 1|148|Isaiah 63:7-9|Hebrews 2:10-18|Matthew 2:13-23
Epiphany 1|40:1-12 or 40:1-11|Isaiah 49:1-7|1 Corinthians 1:1-9|John 1:29-41
Epiphany 2|63:1-8|Isaiah 49:8-16a|1 Corinthians 1:10-17|John 2:1-11
Epiphany 3|27 or 27:1-9|Isaiah 9:1-4|1 Corinthians 1:18-25(26-31)|Matthew 4:12-23
Epiphany 4|15 or Canticle 18 or 19|Micah 6:1-8|1 Corinthians 2:1-11(12-16)|Matthew 5:1-12
Epiphany 5|112|Isaiah 58:5-12|1 Corinthians 3:1-9|Matthew 5:13-20
Epiphany 6|119:1-16 or 119:1-8|Deuteronomy 30:15-20|1 Corinthians 3:10-11,16-23|Matthew 5:21-24(25-26)27-37
Epiphany 7|99|Leviticus 19:1-2,9-18|1 Corinthians 4:1-5(6-7)8-13|Matthew 5:38-48
Easter 6|68:1-20 or 47|Acts 1:(1-7)8-14 or Ezekiel 39:21-29|1 Peter 4:12-19 or Acts 1:(1-7)8-14|John 17:1-11
Pentecost|104:25-37 or 104:24-32 or 33:12-15,18-22|Acts 2:1-11 or Numbers 11:24-30|1 Corinthians 12:4-13 or Acts 2:1-11|John 20:19-23 or John 7:37-39a
Trinity Sunday|Canticle 2 or 13|Genesis 1:1---2:3|2 Corinthians 13:(5-10)11-13|Matthew 28:16-20
Christ the King|95 or 95:1-7|Ezekiel 34:11-17|1 Corinthians 15:20-28|Matthew 25:31-46
Transfiguration|99|Exodus 24:12(13-14)15-18|Philippians 3:7-14|Matthew 17:1-9
Ash Wednesday|103 or 103:8-14|Joel 2:1-2,12-17 or Isaiah 58:1-12|2 Corinthians 5:20b---6:10|Matthew 6:1-6,16-21
Lent 1|51 or 51:1-13|Genesis 2:4b-9,15-17,25---3:7|Romans 5:12-19(20-21)|Matthew 4:1-11
Lent 2|33:12-22|Genesis 12:1-8|Romans 4:1-5(6-12)13-17|John 3:1-17
Lent 3|95 or 95:6-11|Exodus 17:1-7|Romans 5:1-11|John 4:5-26(27-38)39-42
Lent 4|23|1 Samuel 16:1-13|Ephesians 5:(1-7)8-14|John 9:1-13(14-27)28-38
Lent 5|130|Ezekiel 37:1-3(4-10)11-14|Romans 6:16-23|John 11:(1-17)18-44
Palm Sunday|22:1-21 or 22:1-11|Isaiah 45:21-25 or Isaiah 52:13--53:12|Philippians 2:5-11|Matthew (26:36-75) 27:1-54(55-66)
Easter|118:14-17,22-24 or 118:14-24|Acts 10:34-43 or Exodus 14:10-14,21-25; 15:20-21|Colossians 3:1-4 or Acts 10:34-43|John 20:1-10(11-18) or Matthew 28:1-10
Easter 1|111 or 118:19-24|Acts 2:14a,22-32 or Genesis 8:6-16; 9:8-16|1 Peter 1:3-9 or Acts 2:14a,22-32|John 20:19-31
Easter 2|116 or 116:10-17|Acts 2:14a,36-47 or Isaiah 43:1-12|1 Peter 1:17-23 or Acts 2:14a,36-47|Luke 24:13-35
Easter 3|23|Acts 6:1-9; 7:2a,51-60 or Nehemiah 9:6-15|1 Peter 2:19-25 or Acts 6:1-9; 7:2a,51-60|John 10:1-10
Easter 4|66:1-11 or 66:1-8|Acts 17:1-15 or Deuteronomy 6:20-25|1 Peter 2:1-10 or Acts 17:1-15|John 14:1-14
Easter 5|148 or 148:7-14|Acts 17:22-31 or Isaiah 41:17-20|1 Peter 3:8-18 or Acts 17:22-31|John 15:1-8`;

            const LECTIONARY_B_RAW_DATA = `label|psalms|ot|nt|gospel
Advent 1|80 or 80:1-7|Isaiah 64:1-9a|1 Corinthians 1:1-9|Mark 13:(24-32)33-37
Advent 2|85 or 85:7-13|Isaiah 40:1-11|2 Peter 3:8-15a,18|Mark 1:1-8
Advent 3|126 or Canticle 3 or 15|Isaiah 65:17-25|1 Thessalonians 5:(12-15)16-28|John 1:6-8,19-28 or John 3:23-30
Advent 4|132 or 132:8-15|2 Samuel 7:4,8-16|Romans 16:25-27|Luke 1:26-38
Christmas|96 or 96:1-4,11-12|Isaiah 9:2-4,6-7|Titus 2:11-14|Luke 2:1-14(15-20)
Christmastide 1|147 or 147:13-21|Isaiah 61:10---62:3|Galatians 3:23-25; 4:4-7|John 1:1-18
Epiphany 1|130|Genesis 1:1-5|Acts 19:1-7|Mark 1:4-11
Epiphany 2|62 or 62:6-12|1 Samuel 3:1-10(11-20)|1 Corinthians 6:12-20|John 1:43-51
Epiphany 3|128|Jonah 3:1-5,10|1 Corinthians 7:29-31|Mark 1:14-20
Epiphany 4|111|Deuteronomy 18:15-20|1 Corinthians 8:1-13|Mark 1:21-28
Epiphany 5|147 or 147:1-12|Isaiah 40:21-31|1 Corinthians 9:16-23|Mark 1:29-39
Epiphany 6|32 or 32:1-8|2 Kings 5:1-15a|1 Corinthians 9:24-27|Mark 1:40-45
Epiphany 8|103 or 103:1-6|Hosea 2:14-23|2 Corinthians 3:(4-11)17---4:2|Mark 2:18-22
Transfiguration|27 or 27:5-11|1 Kings 19:9-18|2 Peter 1:16-19(20-21)|Mark 9:2-9
Ash Wednesday|103 or 103:8-14|Joel 2:1-2,12-17 or Isaiah 58:1-12|2 Corinthians 5:20b---6:10|Matthew 6:1-6,16-21
Lent 1|25 or 25:3-9|Genesis 9:8-17|1 Peter 3:18-22|Mark 1:9-13
Lent 2|16 or 16:5-11|Genesis 22:1-14|Romans 8:31-39|Mark 8:31-38
Lent 3|19:7-14|Exodus 20:1-17|Romans 7:13-25|John 2:13-22
Lent 4|122|2 Chronicles 36:14-23|Ephesians 2:4-10|John 6:4-15
Lent 5|51 or 51:11-16|Jeremiah 31:31-34|Hebrews 5:(1-4)5-10|John 12:20-33
Palm Sunday|22:1-21 or 22:1-11|Isaiah 45:21-25 or Isaiah 52:13--53:12|Philippians 2:5-11|Mark (14:32-72) 15:1-39(40-47)
Easter|118:14-17,22-24 or 118:14-24|Acts 10:34-43 or Exodus 14:10-14,21-25; 15:20-21|Colossians 3:1-4 or Acts 10:34-43|John 20:1-18 or Mark 16:1-8
Easter 1|16|Acts 3:12-19|1 John 3:1-7|Luke 24:36b-48
Easter 2|23|Acts 4:5-12|1 John 3:16-24|John 10:11-18
Easter 3|100|Acts 8:26-40|1 John 4:7-21|John 15:1-8
Easter 4|1|Acts 10:44-48|1 John 5:1-6|John 15:9-17
Easter 5|47|Acts 1:1-11|Ephesians 1:15-23|Luke 24:44-53
Easter 6|103 or 103:1-13|Ezekiel 36:22-28|Acts 2:1-11|John 15:26-27; 16:4b-15
Pentecost|104:25-37 or Canticle 8 or 9|Acts 2:1-11 or Ezekiel 37:1-14|Romans 8:22-27 or Acts 2:1-11|John 15:26-27; 16:4b-15
Trinity Sunday||Information not available||
Christ the King|93|Daniel 7:9-10,13-14|Revelation 1:4b-8|John 18:33-37`;
            
            const LECTIONARY_C_RAW_DATA = `label|psalms|ot|nt|gospel
Advent 1|50 or 50:1-6|Zechariah 14:4-9|1 Thessalonians 3:9-13|Luke 21:25-31
Advent 2|126|Baruch 5:1-9|Philippians 1:1-11|Luke 3:1-6
Advent 3|85 or 85:7-13 or Canticle 9|Zephaniah 3:14-20|Philippians 4:4-7(8-9)|Luke 3:7-18
Advent 4|80 or 80:1-7|Micah 5:2-4|Hebrews 10:5-10|Luke 1:39-49(50-56)
Christmas|96 or 96:1-4,11-12|Isaiah 9:2-3,6-7|Titus 2:11-14|Luke 2:1-14(15-20)
Christmastide 1|147 or 147:13-21|Isaiah 61:10--62:3|Galatians 3:23-25; 4:4-7|John 1:1-18
Christmastide 2|84 or 84:1-8|Jeremiah 31:7-14|Ephesians 1:3-6,15-19a|Matthew 2:13-15,19-23 or Luke 2:41-52 or Matthew 2:1-12
Epiphany 1|89:1-29 or 89:20-29|Isaiah 42:1-9|Acts 10:34-38|Luke 3:15-16,21-22
Epiphany 2|96 or 96:1-10|Isaiah 62:1-5|1 Corinthians 12:1-11|John 2:1-11
Epiphany 3|113|Nehemiah 8:2-10|1 Corinthians 12:12-27|Luke 4:14-21
Epiphany 4|71:1-17 or 71:1-6,15-17|Jeremiah 1:4-10|1 Corinthians 14:12b-20|Luke 4:21-32
Epiphany 5|85 or 85:7-13|Judges 6:11-24a|1 Corinthians 15:1-11|Luke 5:1-11
Epiphany 6|1|Jeremiah 17:5-10|1 Corinthians 15:12-20|Luke 6:17-26
Epiphany 7|37:1-18 or 37:3-10|Genesis 45:3-11,21-28|1 Corinthians 15:35-38,42-50|Luke 6:27-38
Epiphany 8|92 or 92:1-5,11-14|Jeremiah 7:1-7(8-15)|1 Corinthians 15:50-58|Luke 6:39-49
Epiphany 9|99|Exodus 34:29-35|1 Corinthians 12:27--13:13|Luke 9:28-36
Transfiguration|99|Exodus 34:29-35|1 Corinthians 12:27--13:13|Luke 9:28-36
Ash Wednesday|103 or 103:8-14|Joel 2:1-2,12-17 or Isaiah 58:1-12|2 Corinthians 5:20b---6:10|Matthew 6:1-6,16-21
Lent 1|91 or 91:9-15|Deuteronomy 26:(1-4)5-11|Romans 10:(5-8a)8b-13|Luke 4:1-13
Lent 2|27 or 27:10-18|Genesis 15:1-12,17-18|Philippians 3:17--4:1|Luke 13:(22-30)31-35
Lent 3|103 or 103:1-11|Exodus 3:1-15|1 Corinthians 10:1-13|Luke 13:1-9
Lent 4|34 or 34:1-8|Joshua (4:19-24); 5:9-12|2 Corinthians 5:17-21|Luke 15:11-32
Lent 5|126|Isaiah 43:16-21|Philippians 3:8-14|Luke 20:9-19
Palm Sunday|22:1-21 or 22:1-11|Isaiah 45:21-25 or Isaiah 52:13--53:12|Philippians 2:5-11|Luke (22:39-71) 23:1-49(50-56)
Easter||Isaiah 51:9-11|Colossians 3:1-4 or Acts 10:34-43|Luke 24:1-10
Easter 1|111 or 118:19-24|Acts 5:12a,17-22,25-29 or Job 42:1-6|Revelation 1:(1-8)9-19 or Acts 5:12a,17-22,25-29|John 20:19-31
Easter 2|33 or 33:1-11|Acts 9:1-19a or Jeremiah 32:36-41|Revelation 5:6-14 or Acts 9:1-19a|John 21:1-14
Easter 3|100|Acts 13:15-16,26-33(34-39) or Numbers 27:12-23|Revelation 7:9-17 or Acts 13:15-16,26-33(34-39)|John 10:22-30
Easter 4|145 or 145:1-9|Acts 13:44-52 or Leviticus 19:1-2,9-18|Revelation 19:1,4-9 or Acts 13:44-52|John 13:31-35
Easter 5|67|Acts 14:8-18 or Joel 2:21-27|Revelation 21:22--22:5 or Acts 14:8-18|John 14:23-29
Easter 6|68:1-20 or 47|Acts 16:16-34 or 1 Samuel 12:19-24|Revelation 22:12-14,16-17,20 or Acts 16:16-34|John 17:20-26
Pentecost|104:25-37 or 104:24-32 or 33:12-15,18-22|Acts 2:1-11 or Joel 2:28-32|1 Corinthians 12:4-13 or Acts 2:1-11|John 20:19-23 or John 14:8-17
Trinity Sunday|29 or Canticle 2 or 13|Isaiah 6:1-8|Revelation 4:1-11|John 16:(5-11)12-15
Christ the King|46|Jeremiah 23:1-6|Colossians 1:11-20|Luke 23:35-43 or Luke 19:29-38`;

            // --- App State ---
            let selectedSunday = null;
            let calendarViewDate = new Date();
            const lectionaryDataA = new Map();
            const lectionaryDataB = new Map();
            const lectionaryDataC = new Map();

            // --- Data Parsing ---
            function parseLectionaryData(rawData, targetMap) {
                const lines = rawData.trim().split('\n');
                lines.slice(1).forEach(line => {
                    const parts = line.split('|');
                    if (parts.length === 5) {
                        targetMap.set(parts[0].trim(), {
                            psalms: parts[1].trim(), ot: parts[2].trim(), nt: parts[3].trim(), gospel: parts[4].trim()
                        });
                    }
                });
            }

            // --- Core Date Calculation Functions ---
            function getEaster(year) {
                const a = year % 19, b = Math.floor(year / 100), c = year % 100, d = Math.floor(b / 4), e = b % 4, f = Math.floor((b + 8) / 25), g = Math.floor((b - f + 1) / 3), h = (19 * a + b - d - g + 15) % 30, i = Math.floor(c / 4), k = c % 4, l = (32 + 2 * e + 2 * i - h - k) % 7, m = Math.floor((a + 11 * h + 22 * l) / 451);
                const month = Math.floor((h + l - 7 * m + 114) / 31);
                const day = ((h + l - 7 * m + 114) % 31) + 1;
                return new Date(year, month - 1, day);
            }
            function getPentecost(year) { return new Date(new Date(getEaster(year)).setDate(getEaster(year).getDate() + 49)); }
            function getAshWednesday(year) { return new Date(new Date(getEaster(year)).setDate(getEaster(year).getDate() - 46)); }
            function getFirstSundayOfAdvent(year) {
                const christmas = new Date(year, 11, 25);
                const sundayBeforeChristmas = new Date(christmas);
                sundayBeforeChristmas.setDate(christmas.getDate() - sundayBeforeChristmas.getDay());
                return new Date(sundayBeforeChristmas.setDate(sundayBeforeChristmas.getDate() - 21));
            }
            function getHolidayInfoForDate(date, year) {
                const time = date.getTime();
                if (date.getMonth() === 11 && date.getDate() === 25) return 'Christmas';
                if (date.getMonth() === 0 && date.getDate() === 6) return 'Epiphany';
                
                const easter = getEaster(year);
                const pentecost = getPentecost(year);
                const trinitySunday = new Date(new Date(pentecost).setDate(pentecost.getDate() + 7));
                const palmSunday = new Date(new Date(easter).setDate(easter.getDate() - 7));
                const ashWednesday = getAshWednesday(year);
                const transfiguration = new Date(new Date(ashWednesday).setDate(ashWednesday.getDate() - 3));
                const firstSundayOfAdvent = getFirstSundayOfAdvent(year);
                const christTheKing = new Date(new Date(firstSundayOfAdvent).setDate(firstSundayOfAdvent.getDate() - 7));

                if (time === easter.getTime()) return 'Easter';
                if (time === pentecost.getTime()) return 'Pentecost';
                if (time === trinitySunday.getTime()) return 'Trinity Sunday';
                if (time === christTheKing.getTime()) return 'Christ the King';
                if (time === palmSunday.getTime()) return 'Palm Sunday';
                if (time === ashWednesday.getTime()) return 'Ash Wednesday';
                if (time === transfiguration.getTime()) return 'Transfiguration';

                if (date.getDay() === 0) { // Seasonal Sundays
                    const advent1 = getFirstSundayOfAdvent(year);
                    for (let i = 0; i < 4; i++) {
                        if (time === new Date(advent1).setDate(advent1.getDate() + (i * 7))) return `Advent ${i + 1}`;
                    }
                    if (date > new Date(date.getMonth() === 0 ? year - 1 : year, 11, 25) && date < new Date(date.getMonth() === 0 ? year : year + 1, 0, 6)) {
                        return `Christmastide ${Math.round((time - getTargetSunday(new Date(date.getMonth() === 0 ? year - 1 : year, 11, 25)).getTime()) / 604800000) + 1}`;
                    }
                    if (date >= getTargetSunday(new Date(year, 0, 6)) && date < ashWednesday) {
                        return `Epiphany ${Math.round((time - getTargetSunday(new Date(year, 0, 6)).getTime()) / 604800000) + 1}`;
                    }
                    if (date > ashWednesday && date < easter) {
                        return `Lent ${Math.round((time - getTargetSunday(ashWednesday).getTime()) / 604800000) + 1}`;
                    }
                    if (date > easter && date < pentecost) {
                        return `Easter ${Math.round((time - easter.getTime()) / 604800000)}`;
                    }
                    if (date > trinitySunday && date < christTheKing) {
                        return `Pentecost ${Math.round((time - pentecost.getTime()) / 604800000)}`;
                    }
                }
                return null;
            }
            function getLectionaryInfo(date) {
                const year = date.getFullYear();
                const firstSundayOfAdventForYear = getFirstSundayOfAdvent(year);
                let liturgicalYear = (date >= firstSundayOfAdventForYear) ? year + 1 : year;
                const cycle = ['A', 'B', 'C'][(liturgicalYear - 1) % 3];
                const startDate = getFirstSundayOfAdvent(liturgicalYear - 1);
                const endDate = new Date(new Date(getFirstSundayOfAdvent(liturgicalYear)).setDate(getFirstSundayOfAdvent(liturgicalYear).getDate() - 7));
                return { cycle, startDate, endDate };
            }
            function getTargetSunday(baseDate) {
                const date = new Date(baseDate);
                date.setHours(0, 0, 0, 0);
                date.setDate(date.getDate() + ((7 - date.getDay()) % 7));
                return date;
            }

            // --- UI Update Functions ---
            function updateLectionaryCycleDisplay(date) {
                const lectionaryInfo = getLectionaryInfo(date);
                const cycleDateOptions = { year: 'numeric', month: 'short', day: 'numeric' };
                document.getElementById('lectionaryCycle').textContent = lectionaryInfo.cycle;
                document.getElementById('cycleDateRange').textContent = 
                    `(${lectionaryInfo.startDate.toLocaleDateString('en-US', cycleDateOptions)} â€“ ${lectionaryInfo.endDate.toLocaleDateString('en-US', cycleDateOptions)})`;
            }
            function updateSelectedSundayDisplay(sunday) {
                const sundayDateOptions = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
                document.getElementById('sundayDate').textContent = sunday.toLocaleDateString('en-US', sundayDateOptions);
            }
            function updateReadingsDisplay(label, cycle) {
                const readingsContainer = document.getElementById('readingsContainer');
                readingsContainer.style.display = 'none';

                if (!['A', 'B', 'C'].includes(cycle) || !label || label.startsWith('Pentecost ')) {
                    return;
                }
                
                let dataMap;
                if (cycle === 'A') dataMap = lectionaryDataA;
                else if (cycle === 'B') dataMap = lectionaryDataB;
                else dataMap = lectionaryDataC;
                
                let lookupLabel = label;
                if (cycle === 'A' && label === 'Christmastide 1') {
                    lookupLabel = 'Christmas 1';
                }

                const readings = dataMap.get(lookupLabel);
                if (readings) {
                    document.getElementById('readings-title').textContent = `Readings for ${label} (Year ${cycle})`;
                    document.getElementById('reading-psalms').textContent = readings.psalms;
                    document.getElementById('reading-ot').textContent = readings.ot;
                    document.getElementById('reading-nt').textContent = readings.nt;
                    document.getElementById('reading-gospel').textContent = readings.gospel;
                    readingsContainer.style.display = 'block';
                }
            }
            function renderCalendar() {
                const month = calendarViewDate.getMonth();
                const year = calendarViewDate.getFullYear();
                
                document.getElementById('monthYearDisplay').textContent = 
                    calendarViewDate.toLocaleDateString('en-US', { month: 'long', year: 'numeric' });

                const calendarDaysContainer = document.getElementById('calendarDays');
                calendarDaysContainer.innerHTML = '';
                const firstDayOfMonth = new Date(year, month, 1);
                const daysInMonth = new Date(year, month + 1, 0).getDate();
                const startDayOfWeek = firstDayOfMonth.getDay();
                const today = new Date(); today.setHours(0, 0, 0, 0);

                for (let i = 0; i < startDayOfWeek; i++) calendarDaysContainer.appendChild(document.createElement('div'));

                for (let i = 1; i <= daysInMonth; i++) {
                    const dayDiv = document.createElement('div');
                    const dayNumberSpan = document.createElement('span');
                    dayNumberSpan.textContent = i;
                    dayDiv.appendChild(dayNumberSpan);

                    const currentDate = new Date(year, month, i);
                    dayDiv.classList.add('calendar-day', 'current-month');
                    
                    if (currentDate.getTime() === today.getTime()) dayDiv.classList.add('today');
                    if (selectedSunday && currentDate.getTime() === selectedSunday.getTime()) dayDiv.classList.add('selected-day');
                    
                    const holidayInfo = getHolidayInfoForDate(currentDate, year);
                    if (holidayInfo) {
                        if (holidayInfo.startsWith('Advent') || holidayInfo === 'Christmas' || holidayInfo.startsWith('Lent')) {
                            dayDiv.classList.add('purple-season');
                        } else if (holidayInfo.startsWith('Epiphany') || holidayInfo.startsWith('Pentecost ')) {
                             dayDiv.classList.add('green-season');
                        } else if (holidayInfo === 'Ash Wednesday') {
                            dayDiv.classList.add('ash-wednesday');
                        } else if (holidayInfo === 'Palm Sunday' || holidayInfo === 'Pentecost') {
                            dayDiv.classList.add('red-day');
                        }
                        const holidayLabel = document.createElement('span');
                        holidayLabel.className = 'holiday-label';
                        holidayLabel.textContent = holidayInfo;
                        dayDiv.appendChild(holidayLabel);
                    }
                    
                    dayDiv.addEventListener('click', () => handleDateSelection(new Date(year, month, i)));
                    calendarDaysContainer.appendChild(dayDiv);
                }
            }
            function handleDateSelection(baseDate) {
                selectedSunday = getTargetSunday(baseDate);
                calendarViewDate = new Date(selectedSunday.getFullYear(), selectedSunday.getMonth(), 1);
                
                updateSelectedSundayDisplay(selectedSunday);
                updateLectionaryCycleDisplay(selectedSunday);
                renderCalendar();

                const label = getHolidayInfoForDate(selectedSunday, selectedSunday.getFullYear());
                const cycle = getLectionaryInfo(selectedSunday).cycle;
                updateReadingsDisplay(label, cycle);

                document.getElementById('loading').style.display = 'none';
                document.getElementById('results').style.display = 'block';
            }

            // --- Event Listeners and Initial Setup ---
            const prevMonthBtn = document.getElementById('prevMonthBtn');
            const nextMonthBtn = document.getElementById('nextMonthBtn');
            prevMonthBtn.addEventListener('click', () => {
                calendarViewDate.setMonth(calendarViewDate.getMonth() - 1);
                updateLectionaryCycleDisplay(calendarViewDate);
                renderCalendar();
                updateReadingsDisplay(null, null);
            });
            nextMonthBtn.addEventListener('click', () => {
                calendarViewDate.setMonth(calendarViewDate.getMonth() + 1);
                updateLectionaryCycleDisplay(calendarViewDate);
                renderCalendar();
                updateReadingsDisplay(null, null);
            });

            // --- Initial Load ---
            parseLectionaryData(LECTIONARY_A_RAW_DATA, lectionaryDataA);
            parseLectionaryData(LECTIONARY_B_RAW_DATA, lectionaryDataB);
            parseLectionaryData(LECTIONARY_C_RAW_DATA, lectionaryDataC);
            handleDateSelection(new Date());
        });
    </script>

</body>
</html>



							<script>
                            	
        document.addEventListener('DOMContentLoaded', function() {
            // --- Lectionary Data ---
            const LECTIONARY_A_RAW_DATA = `label|psalms|ot|nt|gospel
Advent 1|122|Isaiah 2:1-5|Romans 13:11-14|Matthew 24:36-44
Advent 2|72:1-7, 18-19|Isaiah 11:1-10|Romans 15:4-13|Matthew 3:1-12
Advent 3|146:5-10|Isaiah 35:1-10|James 5:7-10|Matthew 11:2-11
Advent 4|80:1-7, 17-19|Isaiah 7:10-16|Romans 1:1-7|Matthew 1:18-25
Christmas|98|Isaiah 52:7-10|Hebrews 1:1-4,(5-12)|John 1:1-14
Christmastide 1|148|Isaiah 63:7-9|Hebrews 2:10-18|Matthew 2:13-23
Epiphany 1|40:1-12 or 40:1-11|Isaiah 49:1-7|1 Corinthians 1:1-9|John 1:29-41
Epiphany 2|63:1-8|Isaiah 49:8-16a|1 Corinthians 1:10-17|John 2:1-11
Epiphany 3|27 or 27:1-9|Isaiah 9:1-4|1 Corinthians 1:18-25(26-31)|Matthew 4:12-23
Epiphany 4|15 or Canticle 18 or 19|Micah 6:1-8|1 Corinthians 2:1-11(12-16)|Matthew 5:1-12
Epiphany 5|112|Isaiah 58:5-12|1 Corinthians 3:1-9|Matthew 5:13-20
Epiphany 6|119:1-16 or 119:1-8|Deuteronomy 30:15-20|1 Corinthians 3:10-11,16-23|Matthew 5:21-24(25-26)27-37
Epiphany 7|99|Leviticus 19:1-2,9-18|1 Corinthians 4:1-5(6-7)8-13|Matthew 5:38-48
Easter 6|68:1-20 or 47|Acts 1:(1-7)8-14 or Ezekiel 39:21-29|1 Peter 4:12-19 or Acts 1:(1-7)8-14|John 17:1-11
Pentecost|104:25-37 or 104:24-32 or 33:12-15,18-22|Acts 2:1-11 or Numbers 11:24-30|1 Corinthians 12:4-13 or Acts 2:1-11|John 20:19-23 or John 7:37-39a
Trinity Sunday|Canticle 2 or 13|Genesis 1:1---2:3|2 Corinthians 13:(5-10)11-13|Matthew 28:16-20
Christ the King|95 or 95:1-7|Ezekiel 34:11-17|1 Corinthians 15:20-28|Matthew 25:31-46
Transfiguration|99|Exodus 24:12(13-14)15-18|Philippians 3:7-14|Matthew 17:1-9
Ash Wednesday|103 or 103:8-14|Joel 2:1-2,12-17 or Isaiah 58:1-12|2 Corinthians 5:20b---6:10|Matthew 6:1-6,16-21
Lent 1|51 or 51:1-13|Genesis 2:4b-9,15-17,25---3:7|Romans 5:12-19(20-21)|Matthew 4:1-11
Lent 2|33:12-22|Genesis 12:1-8|Romans 4:1-5(6-12)13-17|John 3:1-17
Lent 3|95 or 95:6-11|Exodus 17:1-7|Romans 5:1-11|John 4:5-26(27-38)39-42
Lent 4|23|1 Samuel 16:1-13|Ephesians 5:(1-7)8-14|John 9:1-13(14-27)28-38
Lent 5|130|Ezekiel 37:1-3(4-10)11-14|Romans 6:16-23|John 11:(1-17)18-44
Palm Sunday|22:1-21 or 22:1-11|Isaiah 45:21-25 or Isaiah 52:13--53:12|Philippians 2:5-11|Matthew (26:36-75) 27:1-54(55-66)
Easter|118:14-17,22-24 or 118:14-24|Acts 10:34-43 or Exodus 14:10-14,21-25; 15:20-21|Colossians 3:1-4 or Acts 10:34-43|John 20:1-10(11-18) or Matthew 28:1-10
Easter 1|111 or 118:19-24|Acts 2:14a,22-32 or Genesis 8:6-16; 9:8-16|1 Peter 1:3-9 or Acts 2:14a,22-32|John 20:19-31
Easter 2|116 or 116:10-17|Acts 2:14a,36-47 or Isaiah 43:1-12|1 Peter 1:17-23 or Acts 2:14a,36-47|Luke 24:13-35
Easter 3|23|Acts 6:1-9; 7:2a,51-60 or Nehemiah 9:6-15|1 Peter 2:19-25 or Acts 6:1-9; 7:2a,51-60|John 10:1-10
Easter 4|66:1-11 or 66:1-8|Acts 17:1-15 or Deuteronomy 6:20-25|1 Peter 2:1-10 or Acts 17:1-15|John 14:1-14
Easter 5|148 or 148:7-14|Acts 17:22-31 or Isaiah 41:17-20|1 Peter 3:8-18 or Acts 17:22-31|John 15:1-8`;

            const LECTIONARY_B_RAW_DATA = `label|psalms|ot|nt|gospel
Advent 1|80 or 80:1-7|Isaiah 64:1-9a|1 Corinthians 1:1-9|Mark 13:(24-32)33-37
Advent 2|85 or 85:7-13|Isaiah 40:1-11|2 Peter 3:8-15a,18|Mark 1:1-8
Advent 3|126 or Canticle 3 or 15|Isaiah 65:17-25|1 Thessalonians 5:(12-15)16-28|John 1:6-8,19-28 or John 3:23-30
Advent 4|132 or 132:8-15|2 Samuel 7:4,8-16|Romans 16:25-27|Luke 1:26-38
Christmas|96 or 96:1-4,11-12|Isaiah 9:2-4,6-7|Titus 2:11-14|Luke 2:1-14(15-20)
Christmastide 1|147 or 147:13-21|Isaiah 61:10---62:3|Galatians 3:23-25; 4:4-7|John 1:1-18
Epiphany 1|130|Genesis 1:1-5|Acts 19:1-7|Mark 1:4-11
Epiphany 2|62 or 62:6-12|1 Samuel 3:1-10(11-20)|1 Corinthians 6:12-20|John 1:43-51
Epiphany 3|128|Jonah 3:1-5,10|1 Corinthians 7:29-31|Mark 1:14-20
Epiphany 4|111|Deuteronomy 18:15-20|1 Corinthians 8:1-13|Mark 1:21-28
Epiphany 5|147 or 147:1-12|Isaiah 40:21-31|1 Corinthians 9:16-23|Mark 1:29-39
Epiphany 6|32 or 32:1-8|2 Kings 5:1-15a|1 Corinthians 9:24-27|Mark 1:40-45
Epiphany 8|103 or 103:1-6|Hosea 2:14-23|2 Corinthians 3:(4-11)17---4:2|Mark 2:18-22
Transfiguration|27 or 27:5-11|1 Kings 19:9-18|2 Peter 1:16-19(20-21)|Mark 9:2-9
Ash Wednesday|103 or 103:8-14|Joel 2:1-2,12-17 or Isaiah 58:1-12|2 Corinthians 5:20b---6:10|Matthew 6:1-6,16-21
Lent 1|25 or 25:3-9|Genesis 9:8-17|1 Peter 3:18-22|Mark 1:9-13
Lent 2|16 or 16:5-11|Genesis 22:1-14|Romans 8:31-39|Mark 8:31-38
Lent 3|19:7-14|Exodus 20:1-17|Romans 7:13-25|John 2:13-22
Lent 4|122|2 Chronicles 36:14-23|Ephesians 2:4-10|John 6:4-15
Lent 5|51 or 51:11-16|Jeremiah 31:31-34|Hebrews 5:(1-4)5-10|John 12:20-33
Palm Sunday|22:1-21 or 22:1-11|Isaiah 45:21-25 or Isaiah 52:13--53:12|Philippians 2:5-11|Mark (14:32-72) 15:1-39(40-47)
Easter|118:14-17,22-24 or 118:14-24|Acts 10:34-43 or Exodus 14:10-14,21-25; 15:20-21|Colossians 3:1-4 or Acts 10:34-43|John 20:1-18 or Mark 16:1-8
Easter 1|16|Acts 3:12-19|1 John 3:1-7|Luke 24:36b-48
Easter 2|23|Acts 4:5-12|1 John 3:16-24|John 10:11-18
Easter 3|100|Acts 8:26-40|1 John 4:7-21|John 15:1-8
Easter 4|1|Acts 10:44-48|1 John 5:1-6|John 15:9-17
Easter 5|47|Acts 1:1-11|Ephesians 1:15-23|Luke 24:44-53
Easter 6|103 or 103:1-13|Ezekiel 36:22-28|Acts 2:1-11|John 15:26-27; 16:4b-15
Pentecost|104:25-37 or Canticle 8 or 9|Acts 2:1-11 or Ezekiel 37:1-14|Romans 8:22-27 or Acts 2:1-11|John 15:26-27; 16:4b-15
Trinity Sunday||Information not available||
Christ the King|93|Daniel 7:9-10,13-14|Revelation 1:4b-8|John 18:33-37`;
            
            const LECTIONARY_C_RAW_DATA = `label|psalms|ot|nt|gospel
Advent 1|50 or 50:1-6|Zechariah 14:4-9|1 Thessalonians 3:9-13|Luke 21:25-31
Advent 2|126|Baruch 5:1-9|Philippians 1:1-11|Luke 3:1-6
Advent 3|85 or 85:7-13 or Canticle 9|Zephaniah 3:14-20|Philippians 4:4-7(8-9)|Luke 3:7-18
Advent 4|80 or 80:1-7|Micah 5:2-4|Hebrews 10:5-10|Luke 1:39-49(50-56)
Christmas|96 or 96:1-4,11-12|Isaiah 9:2-3,6-7|Titus 2:11-14|Luke 2:1-14(15-20)
Christmastide 1|147 or 147:13-21|Isaiah 61:10--62:3|Galatians 3:23-25; 4:4-7|John 1:1-18
Christmastide 2|84 or 84:1-8|Jeremiah 31:7-14|Ephesians 1:3-6,15-19a|Matthew 2:13-15,19-23 or Luke 2:41-52 or Matthew 2:1-12
Epiphany 1|89:1-29 or 89:20-29|Isaiah 42:1-9|Acts 10:34-38|Luke 3:15-16,21-22
Epiphany 2|96 or 96:1-10|Isaiah 62:1-5|1 Corinthians 12:1-11|John 2:1-11
Epiphany 3|113|Nehemiah 8:2-10|1 Corinthians 12:12-27|Luke 4:14-21
Epiphany 4|71:1-17 or 71:1-6,15-17|Jeremiah 1:4-10|1 Corinthians 14:12b-20|Luke 4:21-32
Epiphany 5|85 or 85:7-13|Judges 6:11-24a|1 Corinthians 15:1-11|Luke 5:1-11
Epiphany 6|1|Jeremiah 17:5-10|1 Corinthians 15:12-20|Luke 6:17-26
Epiphany 7|37:1-18 or 37:3-10|Genesis 45:3-11,21-28|1 Corinthians 15:35-38,42-50|Luke 6:27-38
Epiphany 8|92 or 92:1-5,11-14|Jeremiah 7:1-7(8-15)|1 Corinthians 15:50-58|Luke 6:39-49
Epiphany 9|99|Exodus 34:29-35|1 Corinthians 12:27--13:13|Luke 9:28-36
Transfiguration|99|Exodus 34:29-35|1 Corinthians 12:27--13:13|Luke 9:28-36
Ash Wednesday|103 or 103:8-14|Joel 2:1-2,12-17 or Isaiah 58:1-12|2 Corinthians 5:20b---6:10|Matthew 6:1-6,16-21
Lent 1|91 or 91:9-15|Deuteronomy 26:(1-4)5-11|Romans 10:(5-8a)8b-13|Luke 4:1-13
Lent 2|27 or 27:10-18|Genesis 15:1-12,17-18|Philippians 3:17--4:1|Luke 13:(22-30)31-35
Lent 3|103 or 103:1-11|Exodus 3:1-15|1 Corinthians 10:1-13|Luke 13:1-9
Lent 4|34 or 34:1-8|Joshua (4:19-24); 5:9-12|2 Corinthians 5:17-21|Luke 15:11-32
Lent 5|126|Isaiah 43:16-21|Philippians 3:8-14|Luke 20:9-19
Palm Sunday|22:1-21 or 22:1-11|Isaiah 45:21-25 or Isaiah 52:13--53:12|Philippians 2:5-11|Luke (22:39-71) 23:1-49(50-56)
Easter||Isaiah 51:9-11|Colossians 3:1-4 or Acts 10:34-43|Luke 24:1-10
Easter 1|111 or 118:19-24|Acts 5:12a,17-22,25-29 or Job 42:1-6|Revelation 1:(1-8)9-19 or Acts 5:12a,17-22,25-29|John 20:19-31
Easter 2|33 or 33:1-11|Acts 9:1-19a or Jeremiah 32:36-41|Revelation 5:6-14 or Acts 9:1-19a|John 21:1-14
Easter 3|100|Acts 13:15-16,26-33(34-39) or Numbers 27:12-23|Revelation 7:9-17 or Acts 13:15-16,26-33(34-39)|John 10:22-30
Easter 4|145 or 145:1-9|Acts 13:44-52 or Leviticus 19:1-2,9-18|Revelation 19:1,4-9 or Acts 13:44-52|John 13:31-35
Easter 5|67|Acts 14:8-18 or Joel 2:21-27|Revelation 21:22--22:5 or Acts 14:8-18|John 14:23-29
Easter 6|68:1-20 or 47|Acts 16:16-34 or 1 Samuel 12:19-24|Revelation 22:12-14,16-17,20 or Acts 16:16-34|John 17:20-26
Pentecost|104:25-37 or 104:24-32 or 33:12-15,18-22|Acts 2:1-11 or Joel 2:28-32|1 Corinthians 12:4-13 or Acts 2:1-11|John 20:19-23 or John 14:8-17
Trinity Sunday|29 or Canticle 2 or 13|Isaiah 6:1-8|Revelation 4:1-11|John 16:(5-11)12-15
Christ the King|46|Jeremiah 23:1-6|Colossians 1:11-20|Luke 23:35-43 or Luke 19:29-38`;

            // --- App State ---
            let selectedSunday = null;
            let calendarViewDate = new Date();
            const lectionaryDataA = new Map();
            const lectionaryDataB = new Map();
            const lectionaryDataC = new Map();

            // --- Data Parsing ---
            function parseLectionaryData(rawData, targetMap) {
                const lines = rawData.trim().split('\n');
                lines.slice(1).forEach(line => {
                    const parts = line.split('|');
                    if (parts.length === 5) {
                        targetMap.set(parts[0].trim(), {
                            psalms: parts[1].trim(), ot: parts[2].trim(), nt: parts[3].trim(), gospel: parts[4].trim()
                        });
                    }
                });
            }

            // --- Core Date Calculation Functions ---
            function getEaster(year) {
                const a = year % 19, b = Math.floor(year / 100), c = year % 100, d = Math.floor(b / 4), e = b % 4, f = Math.floor((b + 8) / 25), g = Math.floor((b - f + 1) / 3), h = (19 * a + b - d - g + 15) % 30, i = Math.floor(c / 4), k = c % 4, l = (32 + 2 * e + 2 * i - h - k) % 7, m = Math.floor((a + 11 * h + 22 * l) / 451);
                const month = Math.floor((h + l - 7 * m + 114) / 31);
                const day = ((h + l - 7 * m + 114) % 31) + 1;
                return new Date(year, month - 1, day);
            }
            function getPentecost(year) { return new Date(new Date(getEaster(year)).setDate(getEaster(year).getDate() + 49)); }
            function getAshWednesday(year) { return new Date(new Date(getEaster(year)).setDate(getEaster(year).getDate() - 46)); }
            function getFirstSundayOfAdvent(year) {
                const christmas = new Date(year, 11, 25);
                const sundayBeforeChristmas = new Date(christmas);
                sundayBeforeChristmas.setDate(christmas.getDate() - sundayBeforeChristmas.getDay());
                return new Date(sundayBeforeChristmas.setDate(sundayBeforeChristmas.getDate() - 21));
            }
            function getHolidayInfoForDate(date, year) {
                const time = date.getTime();
                if (date.getMonth() === 11 && date.getDate() === 25) return 'Christmas';
                if (date.getMonth() === 0 && date.getDate() === 6) return 'Epiphany';
                
                const easter = getEaster(year);
                const pentecost = getPentecost(year);
                const trinitySunday = new Date(new Date(pentecost).setDate(pentecost.getDate() + 7));
                const palmSunday = new Date(new Date(easter).setDate(easter.getDate() - 7));
                const ashWednesday = getAshWednesday(year);
                const transfiguration = new Date(new Date(ashWednesday).setDate(ashWednesday.getDate() - 3));
                const firstSundayOfAdvent = getFirstSundayOfAdvent(year);
                const christTheKing = new Date(new Date(firstSundayOfAdvent).setDate(firstSundayOfAdvent.getDate() - 7));

                if (time === easter.getTime()) return 'Easter';
                if (time === pentecost.getTime()) return 'Pentecost';
                if (time === trinitySunday.getTime()) return 'Trinity Sunday';
                if (time === christTheKing.getTime()) return 'Christ the King';
                if (time === palmSunday.getTime()) return 'Palm Sunday';
                if (time === ashWednesday.getTime()) return 'Ash Wednesday';
                if (time === transfiguration.getTime()) return 'Transfiguration';

                if (date.getDay() === 0) { // Seasonal Sundays
                    const advent1 = getFirstSundayOfAdvent(year);
                    for (let i = 0; i < 4; i++) {
                        if (time === new Date(advent1).setDate(advent1.getDate() + (i * 7))) return `Advent ${i + 1}`;
                    }
                    if (date > new Date(date.getMonth() === 0 ? year - 1 : year, 11, 25) && date < new Date(date.getMonth() === 0 ? year : year + 1, 0, 6)) {
                        return `Christmastide ${Math.round((time - getTargetSunday(new Date(date.getMonth() === 0 ? year - 1 : year, 11, 25)).getTime()) / 604800000) + 1}`;
                    }
                    if (date >= getTargetSunday(new Date(year, 0, 6)) && date < ashWednesday) {
                        return `Epiphany ${Math.round((time - getTargetSunday(new Date(year, 0, 6)).getTime()) / 604800000) + 1}`;
                    }
                    if (date > ashWednesday && date < easter) {
                        return `Lent ${Math.round((time - getTargetSunday(ashWednesday).getTime()) / 604800000) + 1}`;
                    }
                    if (date > easter && date < pentecost) {
                        return `Easter ${Math.round((time - easter.getTime()) / 604800000)}`;
                    }
                    if (date > trinitySunday && date < christTheKing) {
                        return `Pentecost ${Math.round((time - pentecost.getTime()) / 604800000)}`;
                    }
                }
                return null;
            }
            function getLectionaryInfo(date) {
                const year = date.getFullYear();
                const firstSundayOfAdventForYear = getFirstSundayOfAdvent(year);
                let liturgicalYear = (date >= firstSundayOfAdventForYear) ? year + 1 : year;
                const cycle = ['A', 'B', 'C'][(liturgicalYear - 1) % 3];
                const startDate = getFirstSundayOfAdvent(liturgicalYear - 1);
                const endDate = new Date(new Date(getFirstSundayOfAdvent(liturgicalYear)).setDate(getFirstSundayOfAdvent(liturgicalYear).getDate() - 7));
                return { cycle, startDate, endDate };
            }
            function getTargetSunday(baseDate) {
                const date = new Date(baseDate);
                date.setHours(0, 0, 0, 0);
                date.setDate(date.getDate() + ((7 - date.getDay()) % 7));
                return date;
            }

            // --- UI Update Functions ---
            function updateLectionaryCycleDisplay(date) {
                const lectionaryInfo = getLectionaryInfo(date);
                const cycleDateOptions = { year: 'numeric', month: 'short', day: 'numeric' };
                document.getElementById('lectionaryCycle').textContent = lectionaryInfo.cycle;
                document.getElementById('cycleDateRange').textContent = 
                    `(${lectionaryInfo.startDate.toLocaleDateString('en-US', cycleDateOptions)} â€“ ${lectionaryInfo.endDate.toLocaleDateString('en-US', cycleDateOptions)})`;
            }
            function updateSelectedSundayDisplay(sunday) {
                const sundayDateOptions = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
                document.getElementById('sundayDate').textContent = sunday.toLocaleDateString('en-US', sundayDateOptions);
            }
            function updateReadingsDisplay(label, cycle) {
                const readingsContainer = document.getElementById('readingsContainer');
                readingsContainer.style.display = 'none';

                if (!['A', 'B', 'C'].includes(cycle) || !label || label.startsWith('Pentecost ')) {
                    return;
                }
                
                let dataMap;
                if (cycle === 'A') dataMap = lectionaryDataA;
                else if (cycle === 'B') dataMap = lectionaryDataB;
                else dataMap = lectionaryDataC;
                
                let lookupLabel = label;
                if (cycle === 'A' && label === 'Christmastide 1') {
                    lookupLabel = 'Christmas 1';
                }

                const readings = dataMap.get(lookupLabel);
                if (readings) {
                    document.getElementById('readings-title').textContent = `Readings for ${label} (Year ${cycle})`;
                    document.getElementById('reading-psalms').textContent = readings.psalms;
                    document.getElementById('reading-ot').textContent = readings.ot;
                    document.getElementById('reading-nt').textContent = readings.nt;
                    document.getElementById('reading-gospel').textContent = readings.gospel;
                    readingsContainer.style.display = 'block';
                }
            }
            function renderCalendar() {
                const month = calendarViewDate.getMonth();
                const year = calendarViewDate.getFullYear();
                
                document.getElementById('monthYearDisplay').textContent = 
                    calendarViewDate.toLocaleDateString('en-US', { month: 'long', year: 'numeric' });

                const calendarDaysContainer = document.getElementById('calendarDays');
                calendarDaysContainer.innerHTML = '';
                const firstDayOfMonth = new Date(year, month, 1);
                const daysInMonth = new Date(year, month + 1, 0).getDate();
                const startDayOfWeek = firstDayOfMonth.getDay();
                const today = new Date(); today.setHours(0, 0, 0, 0);

                for (let i = 0; i < startDayOfWeek; i++) calendarDaysContainer.appendChild(document.createElement('div'));

                for (let i = 1; i <= daysInMonth; i++) {
                    const dayDiv = document.createElement('div');
                    const dayNumberSpan = document.createElement('span');
                    dayNumberSpan.textContent = i;
                    dayDiv.appendChild(dayNumberSpan);

                    const currentDate = new Date(year, month, i);
                    dayDiv.classList.add('calendar-day', 'current-month');
                    
                    if (currentDate.getTime() === today.getTime()) dayDiv.classList.add('today');
                    if (selectedSunday && currentDate.getTime() === selectedSunday.getTime()) dayDiv.classList.add('selected-day');
                    
                    const holidayInfo = getHolidayInfoForDate(currentDate, year);
                    if (holidayInfo) {
                        if (holidayInfo.startsWith('Advent') || holidayInfo === 'Christmas' || holidayInfo.startsWith('Lent')) {
                            dayDiv.classList.add('purple-season');
                        } else if (holidayInfo.startsWith('Epiphany') || holidayInfo.startsWith('Pentecost ')) {
                             dayDiv.classList.add('green-season');
                        } else if (holidayInfo === 'Ash Wednesday') {
                            dayDiv.classList.add('ash-wednesday');
                        } else if (holidayInfo === 'Palm Sunday' || holidayInfo === 'Pentecost') {
                            dayDiv.classList.add('red-day');
                        }
                        const holidayLabel = document.createElement('span');
                        holidayLabel.className = 'holiday-label';
                        holidayLabel.textContent = holidayInfo;
                        dayDiv.appendChild(holidayLabel);
                    }
                    
                    dayDiv.addEventListener('click', () => handleDateSelection(new Date(year, month, i)));
                    calendarDaysContainer.appendChild(dayDiv);
                }
            }
            function handleDateSelection(baseDate) {
                selectedSunday = getTargetSunday(baseDate);
                calendarViewDate = new Date(selectedSunday.getFullYear(), selectedSunday.getMonth(), 1);
                
                updateSelectedSundayDisplay(selectedSunday);
                updateLectionaryCycleDisplay(selectedSunday);
                renderCalendar();

                const label = getHolidayInfoForDate(selectedSunday, selectedSunday.getFullYear());
                const cycle = getLectionaryInfo(selectedSunday).cycle;
                updateReadingsDisplay(label, cycle);

                document.getElementById('loading').style.display = 'none';
                document.getElementById('results').style.display = 'block';
            }

            // --- Event Listeners and Initial Setup ---
            const prevMonthBtn = document.getElementById('prevMonthBtn');
            const nextMonthBtn = document.getElementById('nextMonthBtn');
            prevMonthBtn.addEventListener('click', () => {
                calendarViewDate.setMonth(calendarViewDate.getMonth() - 1);
                updateLectionaryCycleDisplay(calendarViewDate);
                renderCalendar();
                updateReadingsDisplay(null, null);
            });
            nextMonthBtn.addEventListener('click', () => {
                calendarViewDate.setMonth(calendarViewDate.getMonth() + 1);
                updateLectionaryCycleDisplay(calendarViewDate);
                renderCalendar();
                updateReadingsDisplay(null, null);
            });

            // --- Initial Load ---
            parseLectionaryData(LECTIONARY_A_RAW_DATA, lectionaryDataA);
            parseLectionaryData(LECTIONARY_B_RAW_DATA, lectionaryDataB);
            parseLectionaryData(LECTIONARY_C_RAW_DATA, lectionaryDataC);
            handleDateSelection(new Date());
        });
    

							</script>
                        </body>
                        </html>
                    