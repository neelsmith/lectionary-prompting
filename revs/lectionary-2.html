<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RCL Lectionary Cycle Finder</title>
    <style>
        /* Basic CSS for styling the page */
        :root {
            --primary-bg: #f8f9fa;
            --primary-text: #212529;
            --accent-color: #005a9c;
            --card-bg: #ffffff;
            --card-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--primary-bg);
            color: var(--primary-text);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
        }

        .container {
            background-color: var(--card-bg);
            padding: 40px;
            border-radius: 12px;
            box-shadow: var(--card-shadow);
            text-align: center;
            max-width: 600px;
            width: 100%;
        }

        h1 {
            color: var(--accent-color);
            margin-top: 0;
            margin-bottom: 24px;
            font-size: 2em;
        }

        .date-display {
            font-size: 1.5em;
            margin-bottom: 16px;
            color: #495057;
        }

        .cycle-display {
            font-size: 1.2em;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 12px;
        }

        .cycle-label {
            font-size: 3em;
            font-weight: bold;
            color: var(--accent-color);
            line-height: 1;
        }

        footer {
            margin-top: 30px;
            font-size: 0.8em;
            color: #6c757d;
        }

    </style>
</head>
<body>

    <div class="container">
        <h1>Revised Common Lectionary</h1>
        
        <div id="loading">Calculating...</div>

        <div id="results" style="display: none;">
            <p class="date-display" id="sundayDate"></p>
            <div class="cycle-display">
                Lectionary Cycle: <span class="cycle-label" id="lectionaryCycle"></span>
            </div>
        </div>

        <footer>
            The lectionary cycle changes on the First Sunday of Advent.
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // --- 1. Find the correct Sunday Date ---
            // If today is Sunday, use today. Otherwise, find the next Sunday.
            function getTargetSunday() {
                const today = new Date();
                // Set time to 00:00:00 to avoid time zone issues when comparing dates
                today.setHours(0, 0, 0, 0);

                const dayOfWeek = today.getDay(); // 0 = Sunday, 1 = Monday, ..., 6 = Saturday
                const daysUntilSunday = (7 - dayOfWeek) % 7;
                
                const targetSunday = new Date(today);
                targetSunday.setDate(today.getDate() + daysUntilSunday);
                
                return targetSunday;
            }

            // --- 2. Determine the Lectionary Cycle (A, B, or C) ---
            // The cycle is determined by the liturgical year, which begins on the First Sunday of Advent.
            function getLectionaryCycle(date) {
                const year = date.getFullYear();

                // To find the First Sunday of Advent, we work backwards from Christmas Day.
                // It is the fourth Sunday before December 25th.
                const christmas = new Date(year, 11, 25); // Month is 0-indexed, so 11 is December
                const christmasDayOfWeek = christmas.getDay();

                // Find the Sunday of Christmas week by subtracting the day of the week index.
                const sundayBeforeChristmas = new Date(christmas);
                sundayBeforeChristmas.setDate(christmas.getDate() - christmasDayOfWeek);

                // The First Sunday of Advent is three weeks before that Sunday.
                const firstSundayOfAdvent = new Date(sundayBeforeChristmas);
                firstSundayOfAdvent.setDate(sundayBeforeChristmas.getDate() - 21);

                // Determine the liturgical year. If the date is on or after Advent,
                // the liturgical year is the *next* calendar year.
                let liturgicalYear;
                if (date >= firstSundayOfAdvent) {
                    liturgicalYear = year + 1;
                } else {
                    liturgicalYear = year;
                }

                // The Lectionary cycle calculation:
                // Year A begins in Advent of years where (year) % 3 is 2 (e.g., Nov 2022 for liturgical year 2023)
                // A simpler way:
                // Year A: when liturgical year % 3 == 1  (e.g., 2023 -> 2023%3=1, should be 0. Let's adjust.)
                // Liturgical year 2023 is Year A. (2023-1)%3 = 2022%3 = 0. -> A
                // Liturgical year 2024 is Year B. (2024-1)%3 = 2023%3 = 1. -> B
                // Liturgical year 2025 is Year C. (2025-1)%3 = 2024%3 = 2. -> C
                const cycleIndex = (liturgicalYear - 1) % 3;
                const cycles = ['A', 'B', 'C'];
                
                return cycles[cycleIndex];
            }

            // --- 3. Display the results on the page ---
            function displayResults() {
                const sunday = getTargetSunday();
                const cycle = getLectionaryCycle(sunday);

                // Format the date for display
                const dateOptions = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
                const formattedDate = sunday.toLocaleDateString('en-US', dateOptions);

                // Update the DOM elements
                document.getElementById('sundayDate').textContent = formattedDate;
                document.getElementById('lectionaryCycle').textContent = cycle;

                // Show the results and hide the loading message
                document.getElementById('loading').style.display = 'none';
                document.getElementById('results').style.display = 'block';
            }

            // Run the main function
            displayResults();
        });
    </script>

</body>
</html>
